/*
 * Build script for Surgical Risk Calculator Prototype.
 */

apply plugin: 'java'
apply plugin: 'war'
apply plugin: 'eclipse-wtp'

// Basic build properties
sourceCompatibility = '1.7'

repositories {
    // Use 'maven central' for resolving dependencies.
    mavenCentral()
}

/* Versions of dependencies */
def springVersion = '4.1.1.RELEASE'
def slf4jVersion = '1.7.5'

// Don't ever depend on commons-logging, we use jcl-over-sl4j instead.
configurations {
    all*.exclude module: 'commons-logging'
}    

dependencies {
    // The production code uses the SLF4J logging API at compile time
    compile group: 'org.slf4j', name: 'slf4j-api', version: slf4jVersion
    compile group: 'org.slf4j', name: 'jcl-over-slf4j', version: slf4jVersion
    compile 'org.hibernate:hibernate-core:4.2.13.Final'
	compile group: 'org.springframework', name: 'spring-core', version: springVersion
	compile group: 'org.springframework', name: 'spring-webmvc', version: springVersion
	compile group: 'org.springframework', name: 'spring-orm', version: springVersion
	compile 'javax.inject:javax.inject:1'

    providedCompile 'javax.servlet:javax.servlet-api:3.0.1'

    runtime 'ch.qos.logback:logback-classic:1.1.2'

    testCompile 'junit:junit:4.11'
    testCompile 'org.mockito:mockito-core:1.9.5'
	testCompile group: 'org.springframework', name: 'spring-test', version: springVersion
	
	testRuntime 'org.hsqldb:hsqldb:2.3.2'
}

// Hardcode Eclipse servlet spec version because eclipse-wtp just assumes 2.4.
eclipse {
    wtp {
	facet {
	    facet name: 'java', version: sourceCompatibility
	    facet name: 'jst.web', version: '3.0'
	}
    }
}

